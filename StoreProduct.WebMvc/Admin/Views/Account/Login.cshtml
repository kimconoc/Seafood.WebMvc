
@{
    Layout = null;
}

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>Login</title>
    <link href="~/assets/css/theme.css" rel="stylesheet" />
    <link href="~/Content/bootstrap/bootstrap.css" rel="stylesheet" />
    <link href="~/Content/fa/font-awesome.css" rel="stylesheet" />
    <link href="~/Content/login.css" rel="stylesheet" />
    <script src="~/assets/js/Constant.js"></script>
    <script src="~/Scripts/jquery/jquery-3.3.1.js"></script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <style>
        .g-recaptcha {
            transform: scale(1.12);
            transform-origin: 0 0;
        }

        .modal-popup {
            margin: 5% auto !important;
            max-width: 700px;
        }

        .aria-hidden {
            text-align: right;
            margin-right: 10px;
            margin-top: 5px;
        }
            .aria-hidden:focus {
                outline: none;
            }

        input.form-check-input {
            width: 20px;
            height: 20px;
        }

        .r-container-image {
            width: 200px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 50%;
            margin-left: auto;
            margin-right: auto;
        }

        .form-group {
            margin-top: 1rem !important;
            margin-bottom: 0 !important;
        }
    </style>
</head>

<body>
    @*Form login*@
    <div class="login-form">
        <div class="form-group" style="width: 150px; margin: 0 auto;">
            <img style="width: 100%;" src="~/assets/images/logos/logo_login.jpg" />
        </div>

        <form role="form" method="post" data-parsley-validate="">
            @Html.AntiForgeryToken()

            <div class="form-group log-status" id="txtUserName">
                <input type="text" class="form-control" placeholder="Nhập tài khoản" id="UserName" name="UserName">
                <i class="fa fa-user"></i>
            </div>
            <div class="form-group log-status" id="txtPassword" style="margin-bottom: 10px;">
                <input type="password" class="form-control" placeholder="Nhập mật khẩu" id="Password" name="Password">
                <i class="fa fa-lock"></i>
            </div>
            <span id="alert"></span>
            <button style="margin-top: 10px;" type="submit" id="login" class="log-btn">
                Đăng nhập
            </button>
            <div style="display: flex; margin-top:5px">
                <div style="flex:3;">
                    <h6 class="labelClick" onclick="showModalRegister()">Đăng ký tài khoản</h6>
                </div>
                <div style="flex:auto;">
                </div>
                <div style="flex:3.3;">
                    <h6 class="labelClick" onclick="showModalPasswordRetrieval()">Bạn quên mật khẩu?</h6>
                </div>
            </div>
        </form>
    </div>
    @*Popup modal đăng ký tài khoản*@
    <div class="modal" tabindex="-1" role="dialog" id="modalRegister">
        <div class="modal-popup modal-dialog" role="document">
            <div class="modal-content">
                <button class="aria-hidden close" aria-label="Close" onclick="CloseModalRegister()">
                    <span aria-hidden="true">&times;</span>
                </button>
                <div style="display: flex;">
                    @*Vùng 1 thông tin đăng ký*@
                    <div style="flex: 1.5; padding-left: 30px;padding-bottom:30px;">
                        <div class="form-group" style="text-align: left; width: 70px;">
                            <img style="width: 100%;" src="~/assets/images/logos/logo_login.jpg" height="70" />
                        </div>
                        <h6 style="margin-top: 1rem;">Tạo Tài khoản SEAFOOD</h6>
                        <div style="display: flex;">
                            <div style="flex:1;" class="form-group log-status" id="log_r_firstName">
                                <input id="r_firstName" type="text" style="height:35px" class="form-control" placeholder="Họ" />
                            </div>
                            <div style="flex:0.05;">
                            </div>
                            <div style="flex:1;" class="form-group log-status" id="log_r_lastName">
                                <input id="r_lastName" type="text" style="height:35px" class="form-control" placeholder="Tên" />
                            </div>
                        </div>
                        <span class="validateError" id="alert_r1"></span>
                        <div class="form-group log-status" id="log_r_email">
                            <input id="r_email" type="text" style="height:35px;" class="form-control" placeholder="E-mail" />
                        </div>
                        <span class="validateError" id="alert_r2"></span>
                        <div class="form-group log-status" id="log_r_number">
                            <input id="r_number" type="number" style="height:35px;" class="form-control" placeholder="Số điện thoại" />
                        </div>
                        <span class="validateError" id="alert_r3"></span>
                        <div class="form-group log-status" id="log_r_username">
                            <input id="r_username" type="text" style="height:35px;" class="form-control" placeholder="Tài khoản" />
                        </div>
                        <span class="validateError" id="alert_r4"></span>
                        <div style="display: flex;">
                            <div style="flex:1;" class="form-group log-status" id="log_r_password">
                                <input id="r_password" type="password" style="height:35px" class="form-control" placeholder="Mật khẩu" />
                            </div>
                            <div style="flex:0.05;">
                            </div>
                            <div style="flex:1;" class="form-group log-status" id="log_r_confirmPassword">
                                <input id="r_confirmPassword" type="password" style="height:35px" class="form-control" placeholder="Xác nhận" />
                            </div>
                        </div>
                        <span class="validateError" id="alert_r5"></span>
                        <div style="margin-left: 10px; margin-right: 10px; font-size: 13px">
                            Sử dụng 8 ký tự trở lên và kết hợp chữ cái, chữ số và biểu tượng. Để tăng tính bảo mật
                        </div>
                        <div class="form-check" style="margin-top: 20px;">
                            <input id="id=" r_showPassword" class="form-check-input" type="checkbox" value="" />
                            <label style="margin-left:20px;margin-top:3px" class="form-check-label">Hiện mật khẩu</label>
                        </div>
                        <div style="display:flex;margin-top:40px">
                            <div style="flex:3;margin-top:5px">
                                <h6 class="labelClick" onclick="cancelRegisterAccount()">Hủy bỏ</h6>
                            </div>
                            <div style="flex:0.3;">
                            </div>
                            <div style="flex: 3; text-align: right;">
                                <button class="buttonCore mdc-button mdc-button--outlined outlined-button--success mdc-ripple-upgraded" onclick="executeRegisterAccount()">
                                    Đăng ký
                                </button>
                            </div>
                        </div>
                    </div>
                    <div style="flex:0.1;">
                    </div>
                    @*Vùng 2 logo giao diện*@
                    <div style="flex: 1; padding: 30px">
                        <div class="r-container-image">
                            <img style="width: 100%;" src="~/assets/images/logos/r-logo_login.jpg" />
                        </div>
                        <label style="margin-top: 15px; text-align:center;">
                            Một tài khoản. Hoạt động trên mọi dịch vụ của Seafood.
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        var modal = document.getElementById("modalRegister");

        $('.form-control').keypress(function () {
            $('.log-status').removeClass('wrong-entry');
        });

        $(document).ready(function ()
        {
            if ('@ViewBag.Message' != '')
            {
                $('#txtUserName').addClass('wrong-entry');
                $('#txtPassword').addClass('wrong-entry');
                $('#alert').html('@ViewBag.Message');
                $('#alert').fadeIn(500);
                setTimeout( "$('#alert').fadeOut(1500);",5000 );
            }

            $('#UserName').trigger('change');
        });
        function showModalRegister()
        {
            modal.style.display = "block";
        }
        function CloseModalRegister()
        {
            modal.style.display = "none";
        }
        function showModalPasswordRetrieval()
        {
            alert('Liên hệ SĐT: 0367823445');
        }
        function cancelRegisterAccount()
        {
            modal.style.display = "none";
        }
        function executeRegisterAccount()
        {
            isValidate = true;
            var r_firstName = $("#r_firstName").val();
            var r_lastName = $("#r_lastName").val();
            var r_email = $("#r_email").val();
            var r_number = $("#r_number").val();
            var r_username = $("#r_username").val();
            var r_password = $("#r_password").val();
            var r_confirmPassword = $("#r_confirmPassword").val();

            if (r_firstName == undefined || r_firstName == ''){
                isValidate = false;
                $('#log_r_firstName').addClass('wrong-entry');
                $('#alert_r1').html('Nhập họ và tên');
                $('#alert_r1').fadeIn(500);
                setTimeout("$('#alert_r1').fadeOut(1500);", 5000);
            }
            if (r_lastName == undefined || r_lastName == '') {
                isValidate = false;
                $('#log_r_lastName').addClass('wrong-entry');
                $('#alert_r1').html('Nhập họ và tên');
                $('#alert_r1').fadeIn(500);
                setTimeout("$('#alert_r1').fadeOut(1500);", 5000);
            }
            if (r_email == undefined || r_email == '') {
                isValidate = false;
                $('#log_r_email').addClass('wrong-entry');
                $('#alert_r2').html('Nhập một địa chỉ Gmail');
                $('#alert_r2').fadeIn(500);
                setTimeout("$('#alert_r2').fadeOut(1500);", 5000);
            }
            if (r_number == undefined || r_number == '') {
                isValidate = false;
                $('#log_r_number').addClass('wrong-entry');
                $('#alert_r3').html('Nhập một số điện thoại');
                $('#alert_r3').fadeIn(500);
                setTimeout("$('#alert_r3').fadeOut(1500);", 5000);
            }
            if (r_username == undefined || r_username == '') {
                isValidate = false;
                $('#log_r_username').addClass('wrong-entry');
                $('#alert_r4').html('Nhập tài khoản đăng nhập');
                $('#alert_r4').fadeIn(500);
                setTimeout("$('#alert_r4').fadeOut(1500);", 5000);
            }
            if (r_password == undefined || r_password == '') {
                isValidate = false;
                $('#log_r_password').addClass('wrong-entry');
                $('#alert_r5').html('Nhập mật khẩu');
                $('#alert_r5').fadeIn(500);
                setTimeout("$('#alert_r5').fadeOut(1500);", 5000);
            }
            if (r_confirmPassword == undefined || r_confirmPassword == '') {
                isValidate = false;
                $('#log_r_confirmPassword').addClass('wrong-entry');
                $('#alert_r5').html('Nhập mật khẩu');
                $('#alert_r5').fadeIn(500);
                setTimeout("$('#alert_r5').fadeOut(1500);", 5000);
            }

            if (!isValidate)
                return;

            dataObject =
            {
                r_firstName: r_firstName,
                r_lastName: r_lastName,
                r_email: r_email,
                r_number: r_number,
                r_username: r_username,
                r_password: r_password,
                r_confirmPassword: r_confirmPassword
            };
            paramData =
            {
                "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]')[0].value,
                "jsonObject": JSON.stringify(dataObject),
            }
            paramUrl = "@Url.Action("CreateAccount", "Account")";

            $.ajax({
                type: "POST",
                traditional: true,
                data:
                {
                    "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]')[0].value,
                    "jsonObject": JSON.stringify(dataObject),
                },
                url: "@Url.Action("CreateAccount", "Account")",
                success: function (data)
                {
                    if (data != null)
                    {
                        alert(oke);
                    }
                    else
                    {
                        // show popup alert save false
                    }
                }
            })



        }
    </script>
</body>
</html>
